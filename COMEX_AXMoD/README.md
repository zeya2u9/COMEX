# APK Analysis Testbed

This repository contains a Python script `raw_testbed.py` for collecting analysis data from APKs by running them on a device. The script generates various data files and folders to help in the analysis process.

## Table of Contents
- [Requirements](#requirements)
- [Setup](#setup)
- [Usage](#usage)
- [Folder Structure](#folder-structure)
- [Tools and Scripts](#tools-and-scripts)

## Requirements
- Python 3.x
- Monkeyrunner
- ADB (Android Debug Bridge)

## Setup

### Install Python dependencies:
```bash
pip install -r requirements.txt
```
Install and configure ADB:
Download ADB from the official site.
Add ADB to your system PATH.
Install Monkeyrunner:
Monkeyrunner is part of the Android SDK. Make sure you have the SDK installed and add the SDK tools to your PATH.

Root your device:
Use Magisk (found in the andro_essentials folder) to root your device.

Set up network capture:
Install Pcapdroid from the andro_essentials folder to capture network data.

Usage

To start collecting analysis data for an APK, run the following command:

The script will run the APK on the connected device and generate various logs and data files in the corresponding folders.

Folder Structure

andro_essentials: Contains all necessary tools required for the testbed, such as Magisk and Pcapdroid.
andro_bins: Contains the strace binary required to capture system calls for the specified APK.
apkinfo: Contains text files named as <APK's hash>.txt, which store the package name of the respective APK.
monkey_scripts: Contains all the monkey and monkeyrunner scripts used in the testbed.
stracelogs: Contains logs generated by strace.
perfetto_traces: Contains traces captured by Perfetto.
netstat: Contains network statistics.
batterystat: Contains battery usage statistics.
lsof: Contains output from lsof (list of open files).
pcaps: Contains pcap files for network traffic.
Tools and Scripts

Monkeyrunner: Used to control the device and interact with the APK.
ADB: Used to communicate with the Android device.
Magisk: Tool for rooting the device.
Pcapdroid: App used to capture network data of a specific APK.
Strace: Tool for capturing system calls.
Ensure your device is connected and recognized by ADB before running the script.
